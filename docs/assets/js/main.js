"use strict";const charactersList=document.querySelector(".jsCharactersList"),character=document.querySelector(".jsCharacter"),input=document.querySelector(".jsInput"),btn=document.querySelector(".jsBtn"),favouritesList=document.querySelector(".jsFavouritesList"),titleCharacters=document.querySelector(".jsTitleCharacters"),titleFavourites=document.querySelector(".jsTitleFav"),articleCharacters=document.querySelector(".jsArticleCharacters"),articleFavourites=document.querySelector(".jsFavouritesList");let characters=[],favouritesCharacters=[];function addToFavourite(t){t.preventDefault();const e=parseInt(t.currentTarget.dataset.id),a=characters.find(t=>t.char_id===e);favouritesCharacters.find(t=>t.char_id===e)||(favouritesCharacters.push(a),localStorage.setItem("favouritesCharacters",JSON.stringify(favouritesCharacters)),drawCharacter(a,favouritesList,!0))}function removeFromFavourite(t){t.preventDefault();const e=parseInt(t.currentTarget.dataset.id);favouritesCharacters=favouritesCharacters.filter(t=>t.char_id!==e),localStorage.setItem("favouritesCharacters",JSON.stringify(favouritesCharacters)),t.currentTarget.remove()}function drawCharacter(t,e,a){const r=document.createElement("li");r.classList.add("character"),r.classList.add("jsCharacter"),r.dataset.id=t.char_id;const c=document.createElement("img");c.setAttribute("src",t.img),c.setAttribute("alt",t.name),c.classList.add("character-img"),r.appendChild(c);const s=document.createElement("p"),i=document.createTextNode(t.name);s.appendChild(i),s.classList.add("character-paragraph"),r.appendChild(s);const o=document.createElement("p"),n=document.createTextNode(t.status);o.appendChild(n),o.classList.add("character-paragraph"),r.appendChild(o),a?(r.classList.add("favourite"),r.addEventListener("click",removeFromFavourite)):r.addEventListener("click",addToFavourite),e.appendChild(r)}function filterCharacter(t){t.preventDefault();const e=input.value;charactersList.innerHTML="",fetchFilteredCharacters(e)}function fetchFilteredCharacters(t){fetch("https://breakingbadapi.com/api/characters?name="+t).then(t=>t.json()).then(t=>{for(const e of t)drawCharacter(e,charactersList,!1)})}function fetchAllCharacters(){fetch("https://breakingbadapi.com/api/characters").then(t=>t.json()).then(t=>{characters=t;for(const t of characters)drawCharacter(t,charactersList,!1)})}function drawFavouritesCharacters(){if(favouritesCharacters.length)for(const t of favouritesCharacters)drawCharacter(t,favouritesList,!0)}btn.addEventListener("click",filterCharacter),fetchAllCharacters(),localStorage.getItem("favouritesCharacters")&&(favouritesCharacters=JSON.parse(localStorage.getItem("favouritesCharacters"))),drawFavouritesCharacters();