"use strict";const charactersList=document.querySelector(".jsCharactersList"),character=document.querySelector(".jsCharacter"),input=document.querySelector(".jsInput"),btn=document.querySelector(".jsBtn"),favouritesList=document.querySelector(".jsFavouritesList"),titleCharacters=document.querySelector(".jsTitleCharacters"),titleFavourites=document.querySelector(".jsTitleFav"),articleCharacters=document.querySelector(".jsArticleCharacters"),articleFavourites=document.querySelector(".jsArticleFavourites");let characters=[],favouritesCharacters=[];function addToFavourite(t){t.preventDefault();const e=parseInt(t.currentTarget.dataset.id),a=characters.find(t=>t.char_id===e);favouritesCharacters.find(t=>t.char_id===e)||(favouritesCharacters.push(a),localStorage.setItem("favouritesCharacters",JSON.stringify(favouritesCharacters)),drawFavouritesCharacters())}function removeFromFavourite(t){t.preventDefault();const e=parseInt(t.currentTarget.dataset.id);favouritesCharacters=favouritesCharacters.filter(t=>t.char_id!==e),localStorage.setItem("favouritesCharacters",JSON.stringify(favouritesCharacters)),drawFavouritesCharacters()}function drawCharacter(t,e,a){const r=document.createElement("li");r.classList.add("character"),r.classList.add("jsCharacter"),r.dataset.id=t.char_id;const s=document.createElement("img");s.setAttribute("src",t.img),s.setAttribute("alt",t.name),s.classList.add("character-img"),r.appendChild(s);const c=document.createElement("p"),i=document.createTextNode(t.name);c.appendChild(i),c.classList.add("character-paragraph"),r.appendChild(c);const o=document.createElement("p"),l=document.createTextNode(t.status);o.appendChild(l),o.classList.add("character-paragraph"),r.appendChild(o),a?(r.classList.add("favourite"),r.addEventListener("click",removeFromFavourite)):r.addEventListener("click",addToFavourite),e.appendChild(r)}function filterCharacter(t){t.preventDefault();const e=input.value;charactersList.innerHTML="",fetchFilteredCharacters(e)}function fetchFilteredCharacters(t){fetch("https://breakingbadapi.com/api/characters?name="+t).then(t=>t.json()).then(t=>{for(const e of t)drawCharacter(e,charactersList,!1)})}function fetchAllCharacters(){fetch("https://breakingbadapi.com/api/characters").then(t=>t.json()).then(t=>{characters=t;for(const t of characters)drawCharacter(t,charactersList,!1)})}function drawFavouritesCharacters(){if(favouritesList.innerHTML="",favouritesCharacters.length){titleCharacters.classList.remove("titles-characters-full-screen"),titleCharacters.classList.add("titles-characters"),titleFavourites.classList.remove("hidden"),articleCharacters.classList.remove("section-list-characters-full-screen"),articleCharacters.classList.add("section-list-characters"),articleFavourites.classList.remove("hidden");for(const t of favouritesCharacters)drawCharacter(t,favouritesList,!0)}else titleCharacters.classList.add("titles-characters-full-screen"),titleCharacters.classList.remove("titles-characters"),titleFavourites.classList.add("hidden"),articleCharacters.classList.add("section-list-characters-full-screen"),articleCharacters.classList.remove("section-list-characters"),articleFavourites.classList.add("hidden")}btn.addEventListener("click",filterCharacter),fetchAllCharacters(),localStorage.getItem("favouritesCharacters")&&(favouritesCharacters=JSON.parse(localStorage.getItem("favouritesCharacters"))),drawFavouritesCharacters();