"use strict";const charactersList=document.querySelector(".jsCharactersList"),character=document.querySelector(".jsCharacter"),input=document.querySelector(".jsInput"),btn=document.querySelector(".jsBtn"),favouritesList=document.querySelector(".jsFavouritesList"),trash=document.querySelector(".jsTrash"),titleCharacters=document.querySelector(".jsTitleCharacters"),titleFavourites=document.querySelector(".jsTitleFav"),articleCharacters=document.querySelector(".jsArticleCharacters"),articleFavourites=document.querySelector(".jsArticleFavourites");let characters=[],favouritesCharacters=[];function addToFavourite(e){e.preventDefault();const t=parseInt(e.currentTarget.dataset.id),a=characters.find(e=>e.char_id===t);favouritesCharacters.find(e=>e.char_id===t)||(favouritesCharacters.push(a),localStorage.setItem("favouritesCharacters",JSON.stringify(favouritesCharacters)),drawFavouritesCharacters())}function removeFromFavourite(e){e.preventDefault();const t=parseInt(e.currentTarget.dataset.id);favouritesCharacters=favouritesCharacters.filter(e=>e.char_id!==t),localStorage.setItem("favouritesCharacters",JSON.stringify(favouritesCharacters)),drawFavouritesCharacters()}function favToTrash(e){e.preventDefault(),favouritesCharacters=[],localStorage.removeItem("favouritesCharacters"),drawFavouritesCharacters()}function drawCharacter(e,t,a){const r=document.createElement("li");r.classList.add("character"),r.classList.add("jsCharacter"),r.dataset.id=e.char_id;const s=document.createElement("img");s.setAttribute("src",e.img),s.setAttribute("alt",e.name),s.classList.add("character-img"),r.appendChild(s);const c=document.createElement("p"),i=document.createTextNode(e.name);c.appendChild(i),c.classList.add("character-paragraph"),r.appendChild(c);const o=document.createElement("p"),l=document.createTextNode(e.status);o.appendChild(l),o.classList.add("character-paragraph"),r.appendChild(o),a?(r.classList.add("favourite"),r.addEventListener("click",removeFromFavourite)):r.addEventListener("click",addToFavourite),t.appendChild(r)}function filterCharacter(e){e.preventDefault();const t=input.value;charactersList.innerHTML="",fetchFilteredCharacters(t)}function fetchFilteredCharacters(e){fetch("https://breakingbadapi.com/api/characters?name="+e).then(e=>e.json()).then(e=>{for(const t of e)drawCharacter(t,charactersList,!1)})}function fetchAllCharacters(){fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{characters=e;for(const e of characters)drawCharacter(e,charactersList,!1)})}function drawFavouritesCharacters(){if(favouritesList.innerHTML="",favouritesCharacters.length){titleCharacters.classList.remove("titles-characters-full-screen"),titleCharacters.classList.add("titles-characters"),titleFavourites.classList.remove("hidden"),articleCharacters.classList.remove("section-list-characters-full-screen"),articleCharacters.classList.add("section-list-characters"),articleFavourites.classList.remove("hidden");for(const e of favouritesCharacters)drawCharacter(e,favouritesList,!0)}else titleCharacters.classList.add("titles-characters-full-screen"),titleCharacters.classList.remove("titles-characters"),titleFavourites.classList.add("hidden"),articleCharacters.classList.add("section-list-characters-full-screen"),articleCharacters.classList.remove("section-list-characters"),articleFavourites.classList.add("hidden")}btn.addEventListener("click",filterCharacter),trash.addEventListener("click",favToTrash),fetchAllCharacters(),localStorage.getItem("favouritesCharacters")&&(favouritesCharacters=JSON.parse(localStorage.getItem("favouritesCharacters"))),drawFavouritesCharacters();